# Инструкции по деплою на Render.com

## Настройка переменных окружения

Для успешного деплоя приложения на Render.com необходимо настроить следующие переменные окружения:

### 1. DATABASE_URL
Это основная переменная для подключения к PostgreSQL базе данных.

**Формат:** `postgres://username:password@host:port/database`

**Пример:** `postgres://myuser:mypassword@dpg-abc123def456-a.oregon-postgres.render.com:5432/mydatabase`

### Как получить DATABASE_URL:
1. Создайте PostgreSQL базу данных в Render.com
2. Скопируйте External Database URL из настроек базы данных
3. Добавьте эту строку как переменную окружения DATABASE_URL в настройках вашего веб-сервиса

## Настройка веб-сервиса

### Build Command:
```bash
dotnet restore && dotnet publish -c Release -o out
```

### Start Command:
```bash
dotnet out/HotelManagement.API.dll
```

### Environment:
- **Runtime:** .NET
- **Region:** Выберите ближайший к вашим пользователям

## Проверка деплоя

1. Убедитесь, что переменная DATABASE_URL установлена правильно
2. Проверьте логи деплоя на наличие ошибок подключения к базе данных
3. Убедитесь, что миграции базы данных выполняются успешно

## Устранение неполадок

### Ошибка "Format of the initialization string does not conform to specification"
Эта ошибка возникает когда:
- DATABASE_URL не установлена или пуста
- DATABASE_URL имеет неправильный формат
- Отсутствуют права доступа к базе данных

### Решение:
1. Проверьте правильность DATABASE_URL в настройках Render
2. Убедитесь, что база данных создана и доступна
3. Проверьте логи для получения дополнительной информации

## Дополнительные настройки

### CORS
Приложение настроено для работы с любыми источниками в продакшене. Если нужно ограничить доступ, измените настройки CORS в Program.cs.

### Логирование
В приложении настроено подробное логирование ошибок подключения к базе данных для упрощения диагностики проблем.